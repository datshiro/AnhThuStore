version: '3.5'

services: 
        web_dev:
          build: .
          command: python -u app.py
          ports:
                  - "8000:8000"
          volumes:
                  - .:/source 

        gateway_dev:
          build: .
          command: python -u gateway.py
          ports:
                  - "8002:8002" 
          volumes:
                  - .:/source 

        bank_dev:
          build: .
          command: python -u vietcombank.py
          ports:
                  - "8003:8003"
          volumes:
                  - .:/source 

        mongodb:
                image: mongo:latest
                ports:
                        - 27017:27017
                volumes:
                  - .:/source 

        mongoseed:
                image: mongo:latest
                links: 
                  - mongodb 
                volumes:
                  - .:/source 
                entrypoint: ["mongorestore","--port=27017", "--gzip", "--db", "anhthudb", "/source/dump/anhthudb"]

networks:
        default:
                name: web_dev
